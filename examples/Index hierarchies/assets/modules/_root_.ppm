{"nodeList": [{"identifier": "time", "definition": "result = pp.create_time('2022.01', '2025.12')", "title": "Time", "nodeClass": "index", "moduleId": "_root_", "x": 550, "y": 390, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": "time_hierarchy_map", "_isNodeCircular": false}, {"identifier": "time_to_years", "definition": "result = pp.to_dataarray(time).str[:4]", "title": "Time to years", "nodeClass": "variable", "moduleId": "_root_", "x": 90, "y": 400, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "time_to_semesters", "definition": "_da_time = pp.to_dataarray(time)\n_da = xr.where(_da_time.str[-2:].astype(int) <= 6, 'S1', 'S2')\n\nresult = time_to_years + '.' + _da", "title": "Time to semesters", "nodeClass": "variable", "moduleId": "_root_", "x": 90, "y": 450, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "time_to_quarters", "definition": "_da_time = pp.to_dataarray(time)\n_da_months = _da_time.str[-2:].astype(int)\n_da = xr.where(_da_months <= 3, 'Q1', xr.where(_da_months <= 6, 'Q2', xr.where(_da_months <= 9, 'Q3', 'Q4')))\n\nresult = time_to_years + '.' + _da", "title": "Time to quarters", "nodeClass": "variable", "moduleId": "_root_", "x": 90, "y": 500, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "quarters", "definition": "result = pd.Index(np.unique(time_to_quarters.values))", "title": "Quarters", "nodeClass": "index", "moduleId": "_root_", "x": 550, "y": 450, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "semesters", "definition": "result = pd.Index(np.unique(time_to_semesters.values))", "title": "Semesters", "nodeClass": "index", "moduleId": "_root_", "x": 670, "y": 390, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "years", "definition": "result = pd.Index(np.unique(time_to_years.values))", "title": "Years", "nodeClass": "index", "moduleId": "_root_", "x": 670, "y": 450, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "a1000_sales_records", "definition": "file_path = 'https://raw.githubusercontent.com/azhar2ds/DataSets/master/10000%20Sales%20Records.csv'\ndf = pd.read_csv(file_path, encoding='utf_8', sep=None)\ndf = df.rename(columns={'Country': 'countries', 'Region': 'regions'})\n\nresult = df", "title": "1000 Sales Records", "nodeClass": "datareading", "moduleId": "_root_", "x": 90, "y": 90, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": null, "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "countries_hierarchy_map", "definition": "result = a1000_sales_records[['countries', 'regions']].drop_duplicates()", "title": "Countries Hierarchy Map", "nodeClass": "variable", "moduleId": "_root_", "x": 320, "y": 90, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "countries", "definition": "result = pd.Index(countries_hierarchy_map['countries'].unique())", "title": "Countries", "nodeClass": "index", "moduleId": "_root_", "x": 550, "y": 80, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": "countries_hierarchy_map", "_isNodeCircular": false}, {"identifier": "regions", "definition": "result = pd.Index(countries_hierarchy_map['regions'].unique())", "title": "Regions", "nodeClass": "index", "moduleId": "_root_", "x": 670, "y": 80, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "products_allocation_form", "definition": "import os\nfrom pyplan_core.classes.FormTypes import FormColumn, FormSettings, DataType, ColumnType, DatabaseConnectionString, SQLiteConnection\n\nresult = pp.form(\n    table_name='products_allocation_form',\n    columns=[\n        FormColumn(\n            field='brands',\n            title='Brand',\n            data_type=DataType.string,\n            column_type=ColumnType.input,\n        ),\n        FormColumn(\n            field='tastes',\n            title='Taste',\n            data_type=DataType.string,\n            column_type=ColumnType.input,\n        ),\n        FormColumn(\n            field='packings',\n            title='Packing',\n            data_type=DataType.string,\n            column_type=ColumnType.input,\n        ),\n        FormColumn(\n            field='products',\n            title='Product',\n            data_type=DataType.string,\n            column_type=ColumnType.input,\n        ),\n    ],\n    settings=FormSettings(\n        database_engine=DatabaseConnectionString.sqlite,\n        database_connection=SQLiteConnection(database_path='forms_data/forms.db'),\n        initial_empty_rows=50,\n        allow_add_rows=True,\n        allow_remove_rows=True\n    )\n)", "title": "Products Allocation Form", "nodeClass": "form", "moduleId": "_root_", "x": 90, "y": 210, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": null, "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "products_hierarchy_map", "definition": "result = products_allocation_form.value.reset_index()[['products', 'packings', 'tastes', 'brands']]", "title": "Products Hierarchy Map", "nodeClass": "variable", "moduleId": "_root_", "x": 320, "y": 210, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "products", "definition": "result = pd.Index(products_hierarchy_map['products'].unique())", "title": "Products", "nodeClass": "index", "moduleId": "_root_", "x": 550, "y": 210, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": "products_hierarchy_map", "_isNodeCircular": false}, {"identifier": "tastes", "definition": "result = pd.Index(products_hierarchy_map['tastes'].unique())", "title": "Tastes", "nodeClass": "index", "moduleId": "_root_", "x": 670, "y": 210, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "packings", "definition": "result = pd.Index(products_hierarchy_map['packings'].unique())", "title": "Packings", "nodeClass": "index", "moduleId": "_root_", "x": 550, "y": 270, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "brands", "definition": "result = pd.Index(products_hierarchy_map['brands'].unique())", "title": "Brands", "nodeClass": "index", "moduleId": "_root_", "x": 670, "y": 270, "z": 1, "w": "100", "h": "50", "description": null, "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "time_hierarchy_map", "definition": "_df = time_to_quarters.to_dataframe(quarters.name)\n_df = _df.join(time_to_semesters.to_dataframe(semesters.name))\n_df = _df.join(time_to_years.to_dataframe(years.name))\n\nresult = _df", "title": "Time Hierarchy Map", "nodeClass": "report", "moduleId": "_root_", "x": 320, "y": 450, "z": 1, "w": "180", "h": "40", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "sales_by_product_region_time", "definition": "np.random.seed(0)\n\nresult = xr.DataArray(\n    np.random.uniform(low=1000., high=5000., size=(len(time), len(countries), len(products))),\n    [time, countries, products]\n)", "title": "Sales by Product, Region & Time", "nodeClass": "report", "moduleId": "_root_", "x": 320, "y": 610, "z": 1, "w": "180", "h": "40", "description": "<p>How to apply hierarchies:</p>\n<div style=\"display: flex; justify-content: center;\"><img style=\"max-height: 45vh;\" src=\"https://github.com/pyplan/pyplan-apps/raw/main/examples/Index%20hierarchies/screenshots/gifs/how-to-apply-hierarchies.gif\" alt=\"How to apply hierarchies\" /></div>", "units": "$", "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "result_txt", "definition": "", "title": "Result", "nodeClass": "text", "moduleId": "_root_", "x": 60, "y": 580, "z": -1, "w": "740", "h": "100", "description": null, "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 0, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "from_dataarrays_txt", "definition": "", "title": "From DataArrays", "nodeClass": "text", "moduleId": "_root_", "x": 60, "y": 370, "z": -1, "w": "740", "h": "200", "description": null, "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 0, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "from_form_txt", "definition": "", "title": "From form", "nodeClass": "text", "moduleId": "_root_", "x": 60, "y": 180, "z": -1, "w": "740", "h": "170", "description": null, "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 0, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "from_dataframe_txt", "definition": "", "title": "From DataFrame", "nodeClass": "text", "moduleId": "_root_", "x": 60, "y": 60, "z": -1, "w": "740", "h": "100", "description": null, "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 0, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}]}