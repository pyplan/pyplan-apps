{"nodeList": [{"identifier": "random_forest_method", "definition": "from sklearn.ensemble import RandomForestClassifier\r\n\r\n# Create classifier\r\n_model = RandomForestClassifier(n_estimators = parameters_rfm['n_estimators'], max_features = parameters_rfm['max_features'], max_depth = parameters_rfm['max_depth'], random_state = fixed_random_state)\r\n\r\n# Fit model\r\nresult = _model.fit(x_train, y_train)", "title": "Random Forest Method", "nodeClass": "outputnode", "moduleId": "random_forest_method_mod", "x": "327", "y": "495", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CB98FF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "accuracy_rfm", "definition": "from sklearn.metrics import accuracy_score\n\nresult = accuracy_score(y_test, model_prediction_rfm)", "title": "Accuracy - Random Forest Method", "nodeClass": "outputnode", "moduleId": "random_forest_method_mod", "x": "327", "y": "580", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "classification_report_rfm", "definition": "from sklearn.metrics import classification_report\n\nresult = classification_report(y_test, model_prediction_rfm, target_names = ['good', 'bad'])", "title": "Classification Report - Random Forest Method", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "327", "y": "705", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "node1_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy", "definition": "result = 0", "title": "Random Forest Method", "nodeClass": "text", "moduleId": "random_forest_method_mod", "x": 47, "y": 65, "z": -1, "w": "929", "h": "706", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 1}, "nodeFont": "Arial Black,15", "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "model_prediction_rfm", "definition": "result = random_forest_method.predict(x_test)", "title": "Model Prediction - Random Forest Method", "nodeClass": "variable", "moduleId": "random_forest_method_mod", "x": "327", "y": "539", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "score_rfm", "definition": "result = random_forest_method.score(x_train, y_train)", "title": "Score - Random Forest Method", "nodeClass": "outputnode", "moduleId": "random_forest_method_mod", "x": "327", "y": "621", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "feature_importance_rfm", "definition": "_columns = normalized_data.columns[normalized_data.columns != 'Risk_bad']\n_importances = random_forest_method.feature_importances_\n\n# Create indexed dataframe with features and their importances\n_df = pd.DataFrame({'feature': _columns, 'importance': _importances})\n\n# Sort dataframe by feature importance\n_df = _df.sort_values(by = 'importance', ascending = False)\n_df['Rank'] = _df['importance'].rank(ascending = False).astype(int).astype(str)\n_df['Rank'] = _df['Rank'].apply(lambda x: '0' + x if len(x) == 1 else x)\n_df['feature'] = _df['Rank'] + '. ' + _df['feature']\n_df = _df.drop(columns = 'Rank').set_index('feature')\n\nresult = _df", "title": "Feature Importance - Random Forest Method", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "543", "y": "705", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "probability_prediction_rfm", "definition": "result = random_forest_method.predict_proba(x_test)[:,1]", "title": "Probability Prediction - Random Forest Method", "nodeClass": "variable", "moduleId": "random_forest_method_mod", "x": "543", "y": "495", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "roc_curve_rfm", "definition": "from sklearn.utils import resample\nfrom sklearn.metrics import roc_curve\nimport plotly.graph_objects as go\n\n_fpr, _tpr, thresholds = roc_curve(y_test, probability_prediction_rfm)\n\n_trace0 = go.Scatter(\n    x = [0, 1],\n    y = [0, 1],\n    name = 'Random'\n    )\n_trace1 = go.Scatter(\n    x = _fpr,\n    y = _tpr,\n    name = 'ROC Curve'\n    )\n\n_data = [_trace0, _trace1]\n\n_layout = go.Layout(\n    yaxis = dict(title = 'True Positive Rate'),\n    xaxis = dict(title = 'False Positive Rate'),\n    )\n\n_fig = go.Figure(_data, _layout)\n_fig.layout.xaxis.update({'anchor': 'x', 'domain': [.05, 0.95]})\n_fig.layout.yaxis.update({'anchor': 'y', 'domain': [.05, 0.95]})\n\nresult = _fig", "title": "ROC Curve - Random Forest Method", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "543", "y": "539", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "precision_score_rfm", "definition": "from sklearn.metrics import precision_score\n\nresult = precision_score(y_test, model_prediction_rfm)", "title": "Precision Score - Random Forest Method", "nodeClass": "outputnode", "moduleId": "random_forest_method_mod", "x": "543", "y": "580", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "recall_score_rfm", "definition": "from sklearn.metrics import recall_score\n\nresult = recall_score(y_test, model_prediction_rfm)", "title": "Recall - Random Forest Method", "nodeClass": "outputnode", "moduleId": "random_forest_method_mod", "x": "543", "y": "621", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "aee5938e0b5e540ad8b7554ad9b1b4266", "definition": "result = x_train", "title": "X Train", "nodeClass": "alias", "moduleId": "random_forest_method_mod", "x": "84", "y": "138", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": "x_train", "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "a245268a01f2146deb75028e8b44eb2f7", "definition": "result = y_train", "title": "Y Train", "nodeClass": "alias", "moduleId": "random_forest_method_mod", "x": "84", "y": "179", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": "y_train", "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "a868a2d2b442146a490af6baca2e40108", "definition": "result = x_test", "title": "X Test", "nodeClass": "alias", "moduleId": "random_forest_method_mod", "x": "84", "y": "220", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": "x_test", "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "a97885f58b84a4c1a97c5c325cf4874ab", "definition": "result = y_test", "title": "Y Test", "nodeClass": "alias", "moduleId": "random_forest_method_mod", "x": "84", "y": "261", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": "y_test", "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "f1_score_rfm", "definition": "from sklearn.metrics import f1_score\n\nresult = f1_score(y_test, model_prediction_rfm)", "title": "F1 Score - Random Forest Method", "nodeClass": "outputnode", "moduleId": "random_forest_method_mod", "x": "543", "y": "663", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "grid_search_cv_rfm", "definition": "# Transform parameters input into dictionary\n_da = xr.where(grid_search_cv_params_grid_rfm == 'None', None, xr.where(grid_search_cv_params_grid_rfm == '', np.nan, grid_search_cv_params_grid_rfm))\n\n_list = []\n_params_dict = {}\n\nfor param in rf_parameters:\n    _param = pp.subscript(_da, rf_parameters, param)\n    _has_none = (_param == None).sum().values.tolist()\n    _list = _param.dropna(ten_lines.name).values.astype(int).tolist()\n    if _has_none > 0:\n        _list.append(None)\n    _params_dict[param] = _list\n\n# Import libraries\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.ensemble import RandomForestClassifier\n\n# Create default model\n_model = RandomForestClassifier(random_state = fixed_random_state)\n\n# Grid search\n_grid_search = GridSearchCV(estimator = _model, cv = 5, param_grid = _params_dict, scoring = metrics_switcher[metric_for_hyperparameter_tuning.value])\n_grid_search.fit(x_train, y_train)\n\nresult = _grid_search", "title": "Grid Search CV - Random Forest Method", "nodeClass": "variable", "moduleId": "random_forest_method_mod", "x": "327", "y": "352", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "node1_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy", "definition": "result = 0", "title": "Model and Metrics", "nodeClass": "text", "moduleId": "random_forest_method_mod", "x": 304, "y": 415, "z": -1, "w": "658", "h": "342", "description": null, "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 1}, "nodeFont": "Arial Black,15", "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "node1_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy", "definition": "result = 0", "title": "Hyperparameter Tuning", "nodeClass": "text", "moduleId": "random_forest_method_mod", "x": 304, "y": 101, "z": -1, "w": "657", "h": "304", "description": null, "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 1}, "nodeFont": "Arial Black,15", "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "grid_search_cv_best_params_rfm", "definition": "_best_params_dict = grid_search_cv_rfm.best_params_\n_values = list(_best_params_dict.values())\n_keys = list(_best_params_dict.keys())\n_da = xr.DataArray(_values, coords = {'rf_parameters': _keys}, dims = ('rf_parameters',))\n\nresult = pp.set_domain(_da, {'rf_parameters': rf_parameters})", "title": "Grid Search CV Best Parameters - RFM", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "543", "y": "311", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CB98FF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "randomized_search_cv_best_params_rfm", "definition": "_best_params_dict = randomized_search_cv_rfm.best_params_\n_values = list(_best_params_dict.values())\n_keys = list(_best_params_dict.keys())\n_da = xr.DataArray(_values, coords = {'rf_parameters': _keys}, dims = ('rf_parameters',))\n\nresult = pp.set_domain(_da, {'rf_parameters': rf_parameters})", "title": "Randomized Search CV Best Parameters - RFM", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "543", "y": "229", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CB98FF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "grid_search_cv_best_score_rfm", "definition": "result = grid_search_cv_rfm.best_score_ ", "title": "Grid Search CV Best Score - RFM", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "543", "y": "352", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CB98FF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "randomized_search_cv_best_score_rfm", "definition": "result = randomized_search_cv_rfm.best_score_ ", "title": "Randomized Search CV Best Score - RFM", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "543", "y": "270", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CB98FF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "node1_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy_copy", "definition": "result = 0", "title": "Datasets", "nodeClass": "text", "moduleId": "random_forest_method_mod", "x": "62", "y": "101", "z": -1, "w": "230", "h": "656", "description": null, "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 1}, "nodeFont": "Arial Black,15", "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "parameters_rfm", "definition": "result = {'max_depth': 7, 'max_features': None, 'n_estimators': 80}", "title": "Random Forest Parameters", "nodeClass": "variable", "moduleId": "random_forest_method_mod", "x": "327", "y": "452", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#FFFF4B", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "paste_grid_search_cv_best_params_rfm", "definition": "parameters_rfm.node.definition = 'result = ' + str(grid_search_cv_rfm.best_params_ )\n\nresult = 0", "title": "Paste Grid Search CV Best Parameters - RFM", "nodeClass": "button", "moduleId": "random_forest_method_mod", "x": "750", "y": "327", "z": 1, "w": "154", "h": "40", "description": null, "units": null, "color": "#CBCBCB", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "grid_search_cv_params_grid_rfm", "definition": "# properties\n_input_properties = {'defaultValue': ''}\n\n# values\nresult = xr.DataArray([['80','90','95','98','100','120','','','',''], ['14','16','18','19','20','21','23','None','',''], ['5','7','11','15','20','25','None','','','']], coords=[(rf_parameters.name, [\"n_estimators\", \"max_features\", \"max_depth\"]),(ten_lines.name, [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\"])]).astype(\"O\")", "title": "Grid Search CV Parameters Grid - Random Forest Method", "nodeClass": "inputdataarray", "moduleId": "random_forest_method_mod", "x": "327", "y": "311", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#FFFF4B", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "randomized_search_cv_rfm", "definition": "# Import uniform for C parameter\nfrom scipy.stats import randint as sp_randint\n\n_params_dict = {\n    'n_estimators': sp_randint(5, 125),\n    'max_features': sp_randint(1, 26),\n    'max_depth': [3, 6, 9, 12, 15, 18, None]\n}\n\n# Import libraries\nfrom sklearn.model_selection import RandomizedSearchCV\nfrom sklearn.ensemble import RandomForestClassifier\n\n# Create default model\n_model = RandomForestClassifier(random_state = fixed_random_state)\n\n# Random search\n_random_search = RandomizedSearchCV(estimator = _model, param_distributions = _params_dict, n_iter = 100, cv = 3, verbose = 2, random_state = fixed_random_state, n_jobs = -1, scoring = metrics_switcher[metric_for_hyperparameter_tuning.value])\n_random_search.fit(x_train, y_train)\n\nresult = _random_search", "title": "Randomized Search CV - Random Forest Method", "nodeClass": "variable", "moduleId": "random_forest_method_mod", "x": "327", "y": "270", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "a8f5eeaba164d42da9a9e7d4a2f86b5e2", "definition": "result = metrics_switcher", "title": "Metrics Switcher", "nodeClass": "alias", "moduleId": "random_forest_method_mod", "x": "327", "y": "179", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": "metrics_switcher", "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": null}, {"identifier": "current_parameters_rfm", "definition": "_values = list(parameters_rfm.values())\n_keys = list(parameters_rfm.keys())\n_da = xr.DataArray(_values, coords = {'rf_parameters': _keys}, dims = ('rf_parameters',))\n\nresult = pp.set_domain(_da, {'rf_parameters': rf_parameters})", "title": "Current Parameters - RFM", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "543", "y": "452", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "roc_auc_rfm", "definition": "from sklearn.metrics import roc_auc_score\n\nresult = roc_auc_score(y_test, probability_prediction_rfm)", "title": "ROC AUC - Random Forest Method", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": 754, "y": 539, "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}, {"identifier": "confusion_matrix_rfm", "definition": "from sklearn.metrics import confusion_matrix\n\n_cm = confusion_matrix(y_test, model_prediction_rfm)\n\n# Create DataArray from confusion matrix, replacing 0 and 1 index by 'Good' and 'Bad'\nresult = xr.DataArray(_cm, coords = {'Actual': ['Actual - Good', 'Actual - Bad'], 'Predicted': ['Predicted - Good', 'Predicted - Bad']}, dims = ['Actual', 'Predicted'])", "title": "Confusion Matrix - Random Forest Method", "nodeClass": "report", "moduleId": "random_forest_method_mod", "x": "327", "y": "663", "z": 1, "w": "184", "h": "30", "description": null, "units": null, "color": "#CCCCCC", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "_isNodeCircular": false}]}