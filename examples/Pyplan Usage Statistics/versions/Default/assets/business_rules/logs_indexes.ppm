{"nodeList": [{"identifier": "logs_time_options", "definition": "result = pd.Index(['1 day', '7 days', '15 days', '1 month', '6 months'])", "title": "Time options", "nodeClass": "index", "moduleId": "logs_indexes", "x": 150, "y": 70, "z": 1, "w": "100", "h": "50", "description": "", "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": "Index", "metadata": {}, "lastEvaluationTime": 0.000208, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": [], "_outputs": ["logs_time_selector"]}, {"identifier": "logs_user_list", "definition": "from os.path import exists\nfrom json import loads,dumps\n\nuser_cache_file = '.log_user_cache'\ncache_user_list = []\n\nif exists(user_cache_file):\n    # Reading cache\n    with open(user_cache_file, 'r+') as _file:\n        cache_user_list = loads(_file.read())\n\n_user_list = logs_of_current_company['user'].dropna().unique()\n\ndata_user_list = set(_user_list)\n\nnew_users = set(_user_list) - set(cache_user_list)\nif len(new_users)>0:\n    [cache_user_list.append(xx) for xx in list(new_users)]\n    try:\n        with open(user_cache_file, 'w') as _file:\n            user_data = dumps(cache_user_list)\n            _file.write(user_data)\n    except:\n        #No have write permisions\n        pass\n        \n\nresult = pd.Index(cache_user_list)", "title": "User list", "nodeClass": "index", "moduleId": "logs_indexes", "x": 40, "y": 70, "z": 1, "w": "100", "h": "50", "description": "", "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": "Index", "metadata": {}, "lastEvaluationTime": 0.002774, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": ["logs_of_current_company"], "_outputs": ["logs_user_selector"]}, {"identifier": "logs_all_dates", "definition": "from datetime import datetime, timezone\nfrom dateutil.relativedelta import relativedelta\n\ntoday = datetime.now(timezone.utc)\ndate_from = today - relativedelta(months=6)\n\nresult = pd.Index(pd.period_range(start=date_from, end=today, freq='1D').strftime('%Y-%m-%d'))", "title": "All dates", "nodeClass": "index", "moduleId": "logs_indexes", "x": 260, "y": 130, "z": 1, "w": "100", "h": "50", "description": "", "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": null, "metadata": {}, "lastEvaluationTime": 0, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": [], "_outputs": []}, {"identifier": "logs_users", "definition": "result = None\nif logs_of_current_company is not None:\n    _user_list = logs_of_current_company['user'].dropna().sort_values().unique()\n    result = pd.Index(_user_list)\nelse:\n    result = pd.Index([])", "title": "Users", "nodeClass": "index", "moduleId": "logs_indexes", "x": 40, "y": 130, "z": 1, "w": "100", "h": "50", "description": "", "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": "Index", "metadata": {}, "lastEvaluationTime": 0.0019999999999999996, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": ["logs_of_current_company"], "_outputs": ["logs_total_users"]}, {"identifier": "aa52c7daff3cd4fc78e5b4c8c7db7f7de", "definition": "", "title": null, "nodeClass": "text", "moduleId": "logs_indexes", "x": 20, "y": 50, "z": -1, "w": "440", "h": "260", "description": "Indexes and functions", "units": null, "color": "#EEEEEE", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 0, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": null, "_resultType": null, "metadata": {}, "lastEvaluationTime": 0, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": [], "_outputs": []}, {"identifier": "delete_cache_on_model_open", "definition": "import os\n\nself.evaluateOnStart = True\nuser_cache_file = '.log_user_cache'\n\nif os.path.exists(user_cache_file):\n    # Reading cache\n    try:\n        os.remove(user_cache_file)\n    except:\n        pass\n         \nresult = 'ok'", "title": "Delete cache on model open", "nodeClass": "variable", "moduleId": "logs_indexes", "x": 40, "y": 250, "z": 1, "w": "180", "h": "40", "description": "", "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": true, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": "str", "metadata": {"last_modified_at": "2025-01-03T15:53:33.585039+00:00", "last_user_to_modify": "Lucas Lascano"}, "lastEvaluationTime": 0.00101, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": [], "_outputs": []}, {"identifier": "logs_time_selector", "definition": "result = pp.selector(logs_time_options, 1, False)", "title": "Logs time selector", "nodeClass": "inputselector", "moduleId": "logs_indexes", "x": 40, "y": 200, "z": 1, "w": "180", "h": "30", "description": null, "units": null, "color": "#4cffa6", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "selectorParams": {"selected_indexes": [1], "selected_values": ["7 days"], "multiselect": false, "save_selected_labels": false, "include_all": false, "options_and_indexes": [{"value": "1 day", "index": 0}, {"value": "7 days", "index": 1}, {"value": "15 days", "index": 2}, {"value": "1 month", "index": 3}, {"value": "6 months", "index": 4}]}, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": "Selector", "metadata": {"last_modified_at": "2025-01-03T16:13:50.033552+00:00", "last_user_to_modify": "Lucas Lascano"}, "lastEvaluationTime": 0.0007959999999999999, "interfaces": ["caeaae92-57b4-4a16-9a72-d7304082695d", "69ec18d4-21d2-4d73-9578-87fd4b7a3f6e", "9f3baf91-d3b5-45a6-9307-5c7add7aa42e"], "title_translations": null, "description_translations": null, "_inputs": ["logs_time_options"], "_outputs": ["logs_get_from_and_to_dates2"]}, {"identifier": "logs_apps", "definition": "result = pd.Index(['No apps found'])\nif logs_of_current_company is not None:\n    _apps_list = logs_of_current_company['app_uri'].dropna().sort_values().unique()\n    _apps_list = _apps_list[_apps_list != '']\n    if len(_apps_list) > 0:\n        result = pd.Index(_apps_list)", "title": "Apps", "nodeClass": "index", "moduleId": "logs_indexes", "x": 260, "y": 70, "z": 1, "w": "100", "h": "50", "description": "", "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": "Index", "metadata": {}, "lastEvaluationTime": 0.001727, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": ["logs_of_current_company"], "_outputs": ["logs_app_selector"]}, {"identifier": "logs_users_sessions", "definition": "result = None\nif logs_of_selected_user is not None:\n    _session_list = logs_of_selected_user['session_id'].dropna().sort_values(ascending=False).unique()\n    result = pd.Index(_session_list)\nelse:\n    result = pd.Index([])", "title": "Users sessions", "nodeClass": "index", "moduleId": "logs_indexes", "x": 150, "y": 130, "z": 1, "w": "100", "h": "50", "description": "", "units": null, "color": "#9999ff", "errorInDef": false, "nodeInfo": {"showInputs": 0, "showOutputs": 0, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": false, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": false, "_isNodeCircular": false, "_resultType": "Index", "metadata": {}, "lastEvaluationTime": 0.000527, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": ["logs_of_selected_user"], "_outputs": ["logs_session_detail", "logs_session_selector"]}, {"identifier": "logs_get_from_and_to_dates2", "definition": "from datetime import datetime, timezone, timedelta\nfrom dateutil.relativedelta import relativedelta\n\ndef _fn():\n    today = datetime.now(timezone.utc)\n    date_from = today\n    date_to = today\n \n    if logs_time_selector.selected==0:\n        date_from = today - timedelta(days=1)\n    elif logs_time_selector.selected==1:\n        date_from = today - timedelta(days=7)\n    elif logs_time_selector.selected==2:\n        date_from = today - timedelta(days=15)\n    elif logs_time_selector.selected==3:\n        date_from = today - relativedelta(months=1)\n    elif logs_time_selector.selected==4:\n        date_from = today - relativedelta(months=6)\n    \n    return {\n        'from': str(date_from.strftime('%Y-%m-%d')),\n        'to': str(date_to.strftime('%Y-%m-%d'))\n    }    \n\nresult = _fn", "title": "Get from and to dates", "nodeClass": "outputnode", "moduleId": "logs_indexes", "x": 260, "y": 200, "z": 1, "w": "180", "h": "40", "description": "", "units": null, "color": "#4CBCFF", "errorInDef": false, "nodeInfo": {"showInputs": 1, "showOutputs": 1, "showLabel": 1, "showBorder": 1, "fill": 1, "useNodeFont": 0}, "nodeFont": null, "numberFormat": null, "originalId": null, "extraData": null, "picture": null, "evaluateOnStart": true, "releaseMemory": false, "defaultView": null, "prefixIdentifier": null, "hierarchy": null, "hasOutputsOutsideModule": true, "_isNodeCircular": false, "_resultType": "function", "metadata": {}, "lastEvaluationTime": 0.001069, "interfaces": null, "title_translations": null, "description_translations": null, "_inputs": ["logs_time_selector"], "_outputs": ["logs_log_filenames"]}]}